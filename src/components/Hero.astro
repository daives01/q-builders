 ---
 import { config } from '../config';
 ---

<div id="hero-backgrounds" class="fixed inset-0 pointer-events-none z-0" aria-hidden="true">
	<img id="hero-blueprint" src={config.hero.blueprintImage} alt="" class="hero-layer absolute inset-0 w-full h-full object-cover transition-opacity duration-[var(--transition-slow)] ease-in-out" style="opacity: 1;" fetchpriority="high" />
	<img id="hero-framing" src={config.hero.framingImage} alt="" class="hero-layer absolute inset-0 w-full h-full object-cover transition-opacity duration-[var(--transition-slow)] ease-in-out" style="opacity: 0;" fetchpriority="high" />
	<img id="hero-house" src={config.hero.houseImage} alt="" class="hero-layer absolute inset-0 w-full h-full object-cover transition-opacity duration-[var(--transition-slow)] ease-in-out" style="opacity: 0;" fetchpriority="high" />
	<div id="hero-overlay" class="absolute inset-0 bg-black/40" />
</div>

<section id="hero" class="relative h-screen z-10" aria-labelledby="hero-heading">
	<div class="absolute inset-0 flex flex-col justify-center md:justify-end px-6 md:px-16 pb-8 md:pb-40">
		<div class="max-w-7xl mx-auto w-full text-center md:text-left">
			<h1 id="hero-heading" class="text-5xl md:text-6xl lg:text-8xl font-bold text-white tracking-tight mb-6 leading-tight animate-fade-in stagger-1">
				{config.hero.headline}
			</h1>
			<p class="text-xl md:text-2xl lg:text-3xl text-white/95 mb-10 font-normal max-w-4xl md:max-w-5xl lg:max-w-7xl mx-auto md:mx-0 leading-relaxed animate-fade-in stagger-2">
				{config.hero.subline}
			</p>
		</div>
	</div>
	<div class="absolute bottom-20 left-1/2 -translate-x-1/2 z-20">
		<a href={`mailto:${config.hero.email}`} class="inline-flex items-center gap-3 bg-white hover:bg-white/90 text-stone-900 font-semibold px-6 md:px-8 py-3 md:py-4 rounded-[var(--radius-md)] transition-all duration-[var(--transition-fast)] tracking-wide group animate-fade-in stagger-3" aria-label="Start your project with Q Builders">
			<span>Start your project</span>
			<svg class="w-5 h-5 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
			</svg>
		</a>
	</div>
	<div class="absolute bottom-6 left-1/2 -translate-x-1/2 animate-fade-in animate-bounce z-10" aria-hidden="true">
		<svg class="w-6 h-6 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
			<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
		</svg>
	</div>
</section>

<style>
	@keyframes fade-in {
		from { opacity: 0; transform: translateY(20px); }
		to { opacity: 1; transform: translateY(0); }
	}

	.animate-fade-in {
		animation: fade-in 1s ease-out 0.5s backwards;
	}

	.stagger-1 {
		animation-delay: 2.2s;
	}

	.stagger-2 {
		animation-delay: 2.4s;
	}

	.stagger-3 {
		animation-delay: 2.6s;
	}

	.hero-layer {
		will-change: opacity;
	}
</style>

  <script>
	const initHeroEffects = () => {
		const heroSection = document.getElementById('hero');
		const blueprint = document.getElementById('hero-blueprint');
		const framing = document.getElementById('hero-framing');
		const house = document.getElementById('hero-house');

		if (!heroSection || !blueprint || !framing || !house) return;

		let isDesktop = window.innerWidth >= 768;
		let spotlightRadius = 350;
		let easingFactor = 0.25;
		let gradientMidOpacity = 0.5;
		let gradientMidMultiplier = 0.5;
		let centerOpacity = 0.0;
		let outerOpacity = 1;
		let delayBlueprintFade = 1000;
		let delayHouseFadeIn = 2000;
		let delaySpotlightStart = 3000;
		let delaySpotlightEnd = 6000;

		const createDebugPanel = () => {
			const panel = document.createElement('div');
			panel.id = 'hero-debug-panel';
			panel.style.cssText = `
				position: fixed;
				top: 20px;
				right: 20px;
				background: rgba(0,0,0,0.9);
				color: white;
				padding: 20px;
				border-radius: 12px;
				font-size: 12px;
				z-index: 9999;
				max-width: 300px;
				font-family: monospace;
			`;

			const controls = [
				{ label: 'Spotlight Radius', prop: 'spotlightRadius', min: 100, max: 800, step: 10 },
				{ label: 'Easing Factor', prop: 'easingFactor', min: 0.01, max: 1, step: 0.01 },
				{ label: 'Gradient Mid Opacity', prop: 'gradientMidOpacity', min: 0, max: 1, step: 0.01 },
				{ label: 'Gradient Mid Multiplier', prop: 'gradientMidMultiplier', min: 0.1, max: 1, step: 0.05 },
				{ label: 'Center Opacity', prop: 'centerOpacity', min: 0, max: 1, step: 0.01 },
				{ label: 'Outer Opacity', prop: 'outerOpacity', min: 0, max: 1, step: 0.01 },
				{ label: 'Delay Blueprint Fade (ms)', prop: 'delayBlueprintFade', min: 0, max: 5000, step: 100 },
				{ label: 'Delay House Fade In (ms)', prop: 'delayHouseFadeIn', min: 0, max: 5000, step: 100 },
				{ label: 'Delay Spotlight Start (ms)', prop: 'delaySpotlightStart', min: 0, max: 10000, step: 100 },
				{ label: 'Delay Spotlight End (ms)', prop: 'delaySpotlightEnd', min: 0, max: 15000, step: 100 },
			];

			const getVal = (prop: string) => {
				switch(prop) {
					case 'spotlightRadius': return spotlightRadius;
					case 'easingFactor': return easingFactor;
					case 'gradientMidOpacity': return gradientMidOpacity;
					case 'gradientMidMultiplier': return gradientMidMultiplier;
					case 'centerOpacity': return centerOpacity;
					case 'outerOpacity': return outerOpacity;
					case 'delayBlueprintFade': return delayBlueprintFade;
					case 'delayHouseFadeIn': return delayHouseFadeIn;
					case 'delaySpotlightStart': return delaySpotlightStart;
					case 'delaySpotlightEnd': return delaySpotlightEnd;
					default: return 0;
				}
			};

			panel.innerHTML = `
				<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
					<strong style="font-size: 14px;">Hero Spotlight Tuner</strong>
					<button id="toggle-debug" style="background: #333; color: white; border: 1px solid #555; padding: 4px 8px; border-radius: 4px; cursor: pointer;">Toggle</button>
				</div>
				<div id="debug-content">
					${controls.map(c => `
						<div style="margin-bottom: 12px;">
							<div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
								<label>${c.label}</label>
								<span id="value-${c.prop}">${getVal(c.prop)}</span>
							</div>
							<input type="range" id="slider-${c.prop}" min="${c.min}" max="${c.max}" step="${c.step}" value="${getVal(c.prop)}" style="width: 100%;" data-prop="${c.prop}" />
						</div>
					`).join('')}
					<button id="reload-animation" style="width: 100%; background: #4a5568; color: white; border: none; padding: 8px; border-radius: 4px; cursor: pointer; margin-top: 10px;">Reload Animation</button>
				</div>
			`;

			document.body.appendChild(panel);

			const toggleBtn = panel.querySelector('#toggle-debug');
			if (toggleBtn) {
				toggleBtn.addEventListener('click', () => {
					const content = panel.querySelector('#debug-content');
					if (content) {
						(content as HTMLElement).style.display = (content as HTMLElement).style.display === 'none' ? 'block' : 'none';
					}
				});
			}

			panel.querySelectorAll('input[type="range"]').forEach(slider => {
				slider.addEventListener('input', (e) => {
					const target = e.target as HTMLInputElement;
					const prop = target.dataset.prop;
					if (prop) {
						const value = parseFloat(target.value);
						switch(prop) {
							case 'spotlightRadius': spotlightRadius = value; break;
							case 'easingFactor': easingFactor = value; break;
							case 'gradientMidOpacity': gradientMidOpacity = value; break;
							case 'gradientMidMultiplier': gradientMidMultiplier = value; break;
							case 'centerOpacity': centerOpacity = value; break;
							case 'outerOpacity': outerOpacity = value; break;
							case 'delayBlueprintFade': delayBlueprintFade = value; break;
							case 'delayHouseFadeIn': delayHouseFadeIn = value; break;
							case 'delaySpotlightStart': delaySpotlightStart = value; break;
							case 'delaySpotlightEnd': delaySpotlightEnd = value; break;
						}
						const valueDisplay = document.getElementById(`value-${prop}`);
						if (valueDisplay) {
							valueDisplay.textContent = target.value;
						}
					}
				});
			});

			const reloadBtn = panel.querySelector('#reload-animation');
			if (reloadBtn) {
				reloadBtn.addEventListener('click', () => {
					window.location.reload();
				});
			}
		};

		createDebugPanel();

		let mouseX = 0;
		let mouseY = 0;
		let currentX = 0;
		let currentY = 0;
		let animationFrame: ReturnType<typeof requestAnimationFrame> | null = null;
		let ticking = false;
		let hasMovedMouse = false;

		blueprint.style.opacity = '1';
		framing.style.opacity = '0';
		house.style.opacity = '0';

		const update = () => {
			if (isDesktop && hasMovedMouse) {
				currentX += (mouseX - currentX) * easingFactor;
				currentY += (mouseY - currentY) * easingFactor;

				const maskGradient = `radial-gradient(circle ${spotlightRadius}px at ${currentX}px ${currentY}px, rgba(0,0,0,${centerOpacity}) 0%, rgba(0,0,0,${gradientMidOpacity}) ${spotlightRadius * gradientMidMultiplier}px, rgba(0,0,0,${outerOpacity}) ${spotlightRadius}px)`;

				house.style.maskImage = maskGradient;
				house.style.webkitMaskImage = maskGradient;
				framing.style.maskImage = '';
				framing.style.webkitMaskImage = '';
				blueprint.style.maskImage = '';
				blueprint.style.webkitMaskImage = '';
			}

			ticking = false;
		};

		const onMouseMove = (e: MouseEvent) => {
			if (!isDesktop) return;
			hasMovedMouse = true;
			mouseX = e.clientX;
			mouseY = e.clientY;
		};

		const animate = () => {
			if (isDesktop) {
				update();
				animationFrame = requestAnimationFrame(animate);
			}
		};

		const startDesktopEffects = () => {
			setTimeout(() => {
				blueprint.style.opacity = '0';
				framing.style.opacity = '1';
			}, delayBlueprintFade);

			setTimeout(() => {
				house.style.opacity = '1';
			}, delayHouseFadeIn);

			setTimeout(() => {
				window.addEventListener('mousemove', onMouseMove, { passive: true });
				animate();
			}, delaySpotlightStart);

			setTimeout(() => {
				hasMovedMouse = false;
				house.style.maskImage = '';
				house.style.webkitMaskImage = '';
			}, delaySpotlightEnd);
		};

		const startMobileEffects = () => {
			setTimeout(() => {
				blueprint.style.opacity = '0';
				framing.style.opacity = '1';
			}, delayBlueprintFade);

			setTimeout(() => {
				framing.style.opacity = '0';
				house.style.opacity = '1';
			}, delayHouseFadeIn);
		};

		if (isDesktop) {
			startDesktopEffects();
		} else {
			startMobileEffects();
		}

		const handleResize = () => {
			const newIsDesktop = window.innerWidth >= 768;

			if (newIsDesktop !== isDesktop) {
				isDesktop = newIsDesktop;

				window.removeEventListener('mousemove', onMouseMove);
				if (animationFrame) cancelAnimationFrame(animationFrame);
				animationFrame = null;

				blueprint.style.opacity = '1';
				framing.style.opacity = '0';
				house.style.opacity = '0';

				if (isDesktop) {
					startDesktopEffects();
				} else {
					startMobileEffects();
				}
			}
		};

		window.addEventListener('resize', handleResize, { passive: true });

		return () => {
			window.removeEventListener('resize', handleResize);
			window.removeEventListener('mousemove', onMouseMove);
			if (animationFrame) cancelAnimationFrame(animationFrame);
			house.style.maskImage = '';
			house.style.webkitMaskImage = '';
			framing.style.maskImage = '';
			framing.style.webkitMaskImage = '';
		};
	};

	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', initHeroEffects);
	} else {
		initHeroEffects();
	}
  </script>
